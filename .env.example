# ===== CLUSTER SETTINGS =====
CLUSTER_NAME=talos-pve

# ===== PROXMOX SETTINGS =====
# Имя стораджа Proxmox (pvesm status)
STORAGE_ISO_NAME=local
STORAGE_IMAGE_NAME=local-lvm

# Директория, где Proxmox хранит ISO (обычно /var/lib/vz/template/iso для local)
ISO_DIR=/var/lib/vz/template/iso

# Сетевой bridge Proxmox
BRIDGE_NAME=vmbr0

# Базовые VMID (vmid = BASE + index - 1)
CP_VMID_BASE=900
WK_VMID_BASE=910

# ===== NODE SIZES =====
# Control-plane
CP_COUNT=3
CP_CPU=2
CP_RAM=4
CP_DISK=20

# Workers
WK_COUNT=3
WK_CPU=4
WK_RAM=16
WK_DISK=100

# Дополнительный диск для воркеров (например, под data/ceph/rook и т.п.)
WK_EXTRA_DISK_ENABLED=false
WK_EXTRA_DISK_SIZE=100

# ===== NETWORKING =====
# Статические IP-адреса для control-plane и worker-нод
# Указываются через запятую, количество должно быть >= CP_COUNT / WK_COUNT
CP_IPS=192.168.10.2,192.168.10.3,192.168.10.4
WK_IPS=192.168.10.10,192.168.10.11,192.168.10.12

# Гейтвей и маска
GATEWAY=192.168.10.1
CIDR_PREFIX=24

# DNS-сервера (через запятую)
DNS_SERVER=8.8.8.8,1.1.1.1

# Виртуальный IP для control-plane (VIP)
VIP_IP=192.168.10.50

# Дополнительные внешние адреса, которые нужно добавить в certSANs API-сервера
# Например, публичный IP, DNS-имя и т.п. (можно оставить пустым)
#EXTERNAL_IPS=203.0.113.10

# ===== TALOS IMAGE SETTINGS =====
# ISO Talos, который будет использоваться как установочный образ
ISO_URL=https://factory.talos.dev/image/2fcc09d8cccf7fea0f198ba11e0238cad9c885ad2dfab9fb39192437f4c7ed2d/v1.12.1/metal-amd64.iso

# Образ установщика Talos (используется в machineconfig)
ISO_INSTALLER_URL=factory.talos.dev/metal-installer/2fcc09d8cccf7fea0f198ba11e0238cad9c885ad2dfab9fb39192437f4c7ed2d:v1.12.1

# Путь до локального Talos ISO (внутри Proxmox хоста)
ISO_LOCAL_PATH=/var/lib/vz/template/iso/metal-amd64.iso

# ===== NAMING =====
VM_BASE_NAME_CP=talos-cp
VM_BASE_NAME_WK=talos-wk

# Каталог для seed-конфигов и сгенерированных seed-ISO
SEEDS_DIR=./seeds

# Управление “лишними” ВМ:
# true  - удалять ВМ с индексом > CP_COUNT / WK_COUNT
# false - не трогать существующие ВМ сверх нужного количества
RECONCILE=true
